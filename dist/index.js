import{mkdir as a,writeFile as l}from"fs/promises";import r from"path";function m(){return{name:"esbuild-plugin-ts-to-json",setup(t){t.onEnd(async o=>{if(p(t.initialOptions),!o?.outputFiles?.length)throw new Error("No output files found. Ensure your esbuild config is properly set.");await Promise.all(o.outputFiles.map(d))})}}}async function d(t){let{dir:o,name:e}=r.parse(t.path),n=r.resolve(o,`${e}.json`);try{let i=`data:text/javascript,${encodeURIComponent(t.text)}`,{default:s={}}=await import(i),u=JSON.stringify(s,null,2);await a(r.dirname(n),{recursive:!0}),await l(n,u)}catch(i){console.error(`Failed to process ${t.path}:`,i)}}function p({write:t,bundle:o,format:e}){if(t)throw new Error('esbuild config: "write" must be set to false. Add "write: false" to your config.');if(!o)throw new Error('esbuild config: "bundle" must be set to true. Add "bundle: true" to your config.');if(e!=="esm")throw new Error(`esbuild config: "format" must be set to "esm". Add "format: 'esm'" to your config.`)}export{m as esbuildTsToJson};
//# sourceMappingURL=index.js.map