import{mkdir as a,writeFile as l}from"fs/promises";import n from"path";function m(){return{name:"esbuild-plugin-ts-to-json",setup(t){t.onEnd(async o=>{var i;if(p(t.initialOptions),!((i=o==null?void 0:o.outputFiles)!=null&&i.length))throw new Error("No output files found. Ensure your esbuild config is properly set.");await Promise.all(o.outputFiles.map(d))})}}}async function d(t){let{dir:o,name:i}=n.parse(t.path),r=n.resolve(o,`${i}.json`);try{let e=`data:text/javascript,${encodeURIComponent(t.text)}`,{default:s={}}=await import(e),u=JSON.stringify(s,null,2);await a(n.dirname(r),{recursive:!0}),await l(r,u)}catch(e){console.error(`Failed to process ${t.path}:`,e)}}function p({write:t,bundle:o,format:i}){if(t)throw new Error('esbuild config: "write" must be set to false. Add "write: false" to your config.');if(!o)throw new Error('esbuild config: "bundle" must be set to true. Add "bundle: true" to your config.');if(i!=="esm")throw new Error(`esbuild config: "format" must be set to "esm". Add "format: 'esm'" to your config.`)}export{m as esbuildTsToJson};
//# sourceMappingURL=index.js.map