"use strict";var P=Object.create;var l=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var T=Object.getOwnPropertyNames;var O=Object.getPrototypeOf,E=Object.prototype.hasOwnProperty;var S=(t,o)=>{for(var i in o)l(t,i,{get:o[i],enumerable:!0})},c=(t,o,i,s)=>{if(o&&typeof o=="object"||typeof o=="function")for(let r of T(o))!E.call(t,r)&&r!==i&&l(t,r,{get:()=>o[r],enumerable:!(s=h(o,r))||s.enumerable});return t};var j=(t,o,i)=>(i=t!=null?P(O(t)):{},c(o||!t||!t.__esModule?l(i,"default",{value:t,enumerable:!0}):i,t)),v=t=>c(l({},"__esModule",{value:!0}),t);var B={};S(B,{esbuildTsToJson:()=>$});module.exports=v(B);var n=require("fs/promises"),a=j(require("path"),1),e=require("typescript"),d=require("url"),x={compilerOptions:{module:e.ModuleKind.ESNext,moduleResolution:e.ModuleResolutionKind.Bundler,target:e.ScriptTarget.ES2017}};function $(){return{name:"esbuild-plugin-ts-to-json",setup(t){t.onEnd(async()=>{let{outdir:o="./build",entryPoints:i}=t.initialOptions;if(!Array.isArray(i))throw new Error("entryPoints must be an array of strings.");for(let s of i){if(typeof s!="string")throw new Error(`Invalid entry point format: ${s}`);let r=a.default.resolve(s),m=a.default.parse(s).name+".json",f=a.default.resolve(o,m),u=`${r}-${Date.now()}.js`;try{await(0,n.stat)(r);let p=await(0,n.readFile)(r,"utf8"),{outputText:w}=(0,e.transpileModule)(p,x);await(0,n.writeFile)(u,w);let g=(0,d.pathToFileURL)(u).toString(),{default:y={}}=await import(g),F=JSON.stringify(y,null,2);await b(f,F)}catch(p){console.error(`Failed to process ${r}:`,p)}finally{await(0,n.unlink)(u)}}})}}}async function b(t,o){let i=a.default.dirname(t);await(0,n.mkdir)(i,{recursive:!0}),await(0,n.writeFile)(t,o)}0&&(module.exports={esbuildTsToJson});
//# sourceMappingURL=index.cjs.map