"use strict";var p=Object.create;var r=Object.defineProperty;var c=Object.getOwnPropertyDescriptor;var f=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,w=Object.prototype.hasOwnProperty;var g=(t,o)=>{for(var i in o)r(t,i,{get:o[i],enumerable:!0})},a=(t,o,i,n)=>{if(o&&typeof o=="object"||typeof o=="function")for(let e of f(o))!w.call(t,e)&&e!==i&&r(t,e,{get:()=>o[e],enumerable:!(n=c(o,e))||n.enumerable});return t};var b=(t,o,i)=>(i=t!=null?p(m(t)):{},a(o||!t||!t.__esModule?r(i,"default",{value:t,enumerable:!0}):i,t)),h=t=>a(r({},"__esModule",{value:!0}),t);var E={};g(E,{esbuildTsToJson:()=>y});module.exports=h(E);var u=require("fs/promises"),s=b(require("path"),1);function y(){return{name:"esbuild-plugin-ts-to-json",setup(t){t.onEnd(async o=>{var i;if(O(t.initialOptions),!((i=o==null?void 0:o.outputFiles)!=null&&i.length))throw new Error("No output files found. Ensure your esbuild config is properly set.");await Promise.all(o.outputFiles.map(F))})}}}async function F(t){let{dir:o,name:i}=s.default.parse(t.path),n=s.default.resolve(o,`${i}.json`);try{let e=`data:text/javascript,${encodeURIComponent(t.text)}`,{default:l={}}=await import(e),d=JSON.stringify(l,null,2);await(0,u.mkdir)(s.default.dirname(n),{recursive:!0}),await(0,u.writeFile)(n,d)}catch(e){console.error(`Failed to process ${t.path}:`,e)}}function O({write:t,bundle:o,format:i}){if(t)throw new Error('esbuild config: "write" must be set to false. Add "write: false" to your config.');if(!o)throw new Error('esbuild config: "bundle" must be set to true. Add "bundle: true" to your config.');if(i!=="esm")throw new Error(`esbuild config: "format" must be set to "esm". Add "format: 'esm'" to your config.`)}0&&(module.exports={esbuildTsToJson});
//# sourceMappingURL=index.cjs.map