"use strict";var F=Object.create;var l=Object.defineProperty;var P=Object.getOwnPropertyDescriptor;var h=Object.getOwnPropertyNames;var T=Object.getPrototypeOf,O=Object.prototype.hasOwnProperty;var E=(t,o)=>{for(var i in o)l(t,i,{get:o[i],enumerable:!0})},d=(t,o,i,s)=>{if(o&&typeof o=="object"||typeof o=="function")for(let n of h(o))!O.call(t,n)&&n!==i&&l(t,n,{get:()=>o[n],enumerable:!(s=P(o,n))||s.enumerable});return t};var M=(t,o,i)=>(i=t!=null?F(T(t)):{},d(o||!t||!t.__esModule?l(i,"default",{value:t,enumerable:!0}):i,t)),S=t=>d(l({},"__esModule",{value:!0}),t);var b={};E(b,{esbuildTsToJson:()=>v});module.exports=S(b);var r=require("fs/promises"),a=M(require("path"),1),e=require("typescript"),c=require("url"),j={compilerOptions:{module:e.ModuleKind.ESNext,moduleResolution:e.ModuleResolutionKind.Bundler,target:e.ScriptTarget.ES2017}};function v(){return{name:"esbuild-plugin-ts-to-json",setup(t){t.onEnd(async()=>{let{outdir:o="./build",entryPoints:i}=t.initialOptions;if(!Array.isArray(i))throw new Error("entryPoints must be an array of strings.");for(let s of i){if(typeof s!="string")throw new Error(`Invalid entry point format: ${s}`);let n=a.default.resolve(s),m=a.default.parse(s).name+".json",f=a.default.resolve(o,m);try{await(0,r.stat)(n);let u=await(0,r.readFile)(n,"utf8"),{outputText:g}=(0,e.transpileModule)(u,j),p=n+".js";await(0,r.writeFile)(p,g);let w=(await import((0,c.pathToFileURL)(p).toString())).default,y=JSON.stringify(w,null,2);await x(f,y)}catch(u){console.error(`Failed to process ${n}:`,u)}}})}}}async function x(t,o){let i=a.default.dirname(t);await(0,r.mkdir)(i,{recursive:!0}),await(0,r.writeFile)(t,o)}0&&(module.exports={esbuildTsToJson});
//# sourceMappingURL=index.cjs.map